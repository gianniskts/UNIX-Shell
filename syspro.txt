-----------------------------UNIX SYSTEM PROGRAMMING-----------------------------

PROJECT 1

Κώτσιας Γιάννης
1115202000113


Η εργασία αποτελείται από modules για την καλύτερη οργάνωση του κώδικα, τα οποία παρουσιάζονται παρακάτω.

|-include
|-----alias.h
|-----background.h
|-----history.h
|-----pipe.h
|-----redirection.h
|-----signals.h
|-----utils.h
|-src
|-----alias.cpp
|-----background.cpp
|-----history.cpp
|-----pipe.cpp
|-----redirection.cpp
|-----signals.cpp
|-----utils.cpp
|-Makefile
|-mysh.cpp

Η εργασία είναι υλοποιημένη με τη γλώσσα C++. Δεν έχει χρησιμοποιηθεί η βιβλιοθήκη STL, καθώς γίνεται κυρίως χρήση βιβλιοθηκών της γλώσσας C.


-----------------------------Εκτέλεση-----------------------------

1.	Στο terminal ανοίξτε με τα κατάλληλα cd τον τρέχων κατάλογο της εργασίας και εκτελέστε τις παρακάτω εντολές
2.	make
3.	./mysh 
Ενδεικτική εκτέλεση: ./mysh 

-----------------------------mysh-----------------------------
Implementation
1.	Αποθηκεύει την εντολή του χρήστη στον πίνακα χαρακτήρων users_command
2.	Αποθηκεύει την εντολή στον πίνακα history μέσω της συνάρτησης addHistory()
3.	Χειρίζεται τα σήματα control-c, control-z μέσω της συνάρτησης signal()
4.	Κάνει parse την εντολή μέσω της συνάρτησης parseCommand() σε tokens
5.	Ελέγχει αν η εντολή είναι η “history” μέσω της checkHistory()
6.	Ελέγχει αν η εντολή περιέχει alias μέσω της checkAlias()
7.	Ελέγχει αν η εντολή περιέχει pipeline και αν ναι τότε την χειρίζεται κατάλληλα
8.	Αν δεν έχει, τότε ελέγχει για ανακατεύθυνση εισόδου/ εξόδου μέσω της checkRedirection()
9.	Ελέγχει αν η εντολή είναι background μέσω της checkBackground()
10.	Ελέγχει αν η εντολή στο background τελείωσε μέσω της checkFinishedBackground(). H mysh κρατάει το pid της νέας background εντολής στην μεταβλητή bg_pid. Μέσω αυτής της συνάρτησης ελέγχει πότε τελείωσε και αν τελείωσε τότε την κάνει wait και τυπώνει το αναγνωριστικό της
11.	Αν δεν είναι εντολή στο background, τότε κάνει fork()
12.	Χειρίζεται την ανακατεύθυνση αν υπάρχει
13.	Κάνει exec την tokenized εντολή 

-----------------------------Redirection-----------------------------
Examples; 1) in-mysh-now:>ls -l > out.txt
	 2) in-mysh-now:>sort < input.txt > out.txt
	 3) in-mysh-now:>cat input.txt >> out2.txt
	 
Implementation
Η συνάρτηση checkRedirection() διασχίζει τον πίνακα tokens για να αναγνωρίσει σύμβολα ανακατεύθυνσης και τροποποιεί τα flags ανάλογα.
Η handleRedirection() χειρίζεται την ανακατεύθυνση κάνοντας open και dup2 τα αρχεία εισόδου - εξόδου. Ειδικά για την έξοδο, αν το σύμβολο είναι ">" τότε κάνει append αλλιώς αν είναι ">>" τότε κάνει truncate.

-----------------------------Pipes-----------------------------
Examples; 1) in-mysh-now:>cat input.txt | sort > out3.txt
	  2) in-mysh-now:>cat input.txt input2.txt | sort > out3.txt
	 
Implementation
Η συνάρτηση handlePipe() διασχίζει τον πίνακα tokens για να αναγνωρίσει αν υπάρχει σύμβολο pipe και αν ναι, τότε δημιουργεί pipe με read-write ends, που για το καθένα κάνει νέο fork και αφού έχει χωρίσει τον πίνακα tokens σε 2 υποπίνακες για το καθέ άκρο της σωλήνωσης κάνει exec ελέγχοντας και για ανακατεύθυνση. 

-----------------------------Background-----------------------------
Example; 1) in-mysh-now:>sort input.txt &
	    ls
	  
Implementation
Η συνάρτηση checkBackground() διασχίζει τον πίνακα tokens για να αναγνωρίσει αν υπάρχει σύμβολο background και αν ναι, τότε δημιουργεί νέα διεργασία με το pid της να χειρίζεται η μητρική διεργασία. 
Η checkFinishedBackground() ενόσω η σημαία background == true, ελέγχει αν η διεργασία στο παρασκήνιο έχει τελειώσει, αλλιώς κοιμάται για 1 sec και ελέγχει ξανά.

-----------------------------Wild Characters-----------------------------
Examples; 1) in-mysh-now:>ls *.t?t
	  2) in-mysh-now:>ls mysh*
	 
Implementation
Η διαχείρηση των wildcards γίνεται στο αρχικό parsing. Άμα ανειχνευτεί ένας από τους 2 χαρακτήρες των wildcards τότε μέσω της βιβλιοθήκης glob.h βρίσκονται όλα τα patterns που ταιριάζουν με την είσοδο του χρήστη.
